LÃ³gica combinada: curva lineal + zona muerta + saturaciÃ³n + K variable

Variables utilizadas:
T_ext: temperatura exterior

T_int: temperatura interior (feedback)

T_obj: consigna interior deseada

K: ganancia del lazo de correcciÃ³n

error: T_obj - T_int

flow_temp: temperatura de agua de impulsiÃ³n (salida)

flow_temp_limited: temperatura de impulsiÃ³n luego de la saturaciÃ³n

GAIN: pendiente de la curva exterior (ej. -0.75)

OFFSET: ordenada al origen (ej. 45)

1. Calcular parte de la curva exterior:
   curva_base = GAIN * T_ext + OFFSET

2. Calcular el error tÃ©rmico:
   error = T_obj - T_int

3. Aplicar zona muerta (Â±0.5 Â°C):
   Si abs(error) < 0.5 entonces
       error = 0

4. Ajustar K segÃºn temperatura exterior:
   Si T_ext < 0 entonces K = 1.5
   Si T_ext > 10 entonces K = 0.5
   Sino K = 1.0

5. Aplicar correcciÃ³n proporcional:
   correccion = K * error

6. Calcular temperatura de impulsiÃ³n:
   flow_temp = curva_base + correccion

7. Aplicar saturaciones:
   Si flow_temp > 70 entonces flow_temp_limited = 70
   Si flow_temp < 30 entonces flow_temp_limited = 30
   Sino flow_temp_limited = flow_temp

8. Enviar flow_temp_limited al actuador (mezcladora, caldera, etc.)

            +----------------+
   T_ext ---->| GAIN * T_ext  |----+
              |  + OFFSET     |    |
              +----------------+  |
                                   v
                            +-------------+
                            |   SUMA      |---+
                            +-------------+   |
                                   ^           v
          +------------------+     |      +----------------+
   T_int--|                  |     |      |  SaturaciÃ³n     |----> flow_temp_limited
         -| error = T_obj -  |     |      |   (30â€“70 Â°C)    |
   T_obj--|     T_int        |     |      +----------------+
          +------------------+     |
                     |             |
     +-----------------------------------------+
     |  Zona muerta: si |error| < 0.5 => 0      |
     +-----------------------------------------+
                     |
           +----------------------+
           | Ajuste dinÃ¡mico de K | (segÃºn T_ext)
           +----------------------+
                     |
              correcciÃ³n = K * error

En LOGO! podÃ©s usar:

Bloques matemÃ¡ticos para la ecuaciÃ³n de la curva

Comparadores para la zona muerta y saturaciÃ³n

Bloques "MUX" o "Selector" para aplicar valores distintos de K segÃºn T_ext

Un bloque de suma final para la salida

Todo lo propuesto es totalmente implementable en LOGO! sin usar funciones avanzadas.
------------------------------------------------------------------------------------
nueva iteracion

Definiciones previas:
T_ext: Temperatura exterior.

T_int: Temperatura interior, es el feedback que queremos controlar.

T_obj: Temperatura de consigna interior deseada (objetivo).

K: Ganancia del control (puede ajustarse para determinar la sensibilidad del sistema).

error: Diferencia entre la consigna y la temperatura actual interior, es decir, 
error
=
ð‘‡
obj
âˆ’
ð‘‡
int
error=T 
obj
â€‹
 âˆ’T 
int
â€‹
 .

flow_temp: Temperatura de agua de impulsiÃ³n (el valor final que se quiere controlar y mantener).

flow_temp_limited: Temperatura de agua de impulsiÃ³n despuÃ©s de aplicar la saturaciÃ³n.

GAIN: Pendiente de la curva de calefacciÃ³n.

OFFSET: Ordenada al origen de la curva de calefacciÃ³n.

Zona Muerta: Un rango de error alrededor de la consigna donde no se toman acciones (para evitar oscilaciones).

SaturaciÃ³n: La temperatura de impulsiÃ³n tiene un valor mÃ¡ximo y mÃ­nimo que no puede exceder.

Curva de calefacciÃ³n: Relaciona la temperatura exterior con la temperatura de impulsiÃ³n para mantener la temperatura interior, generalmente expresada en la forma:

\text{flow_temp} = GAIN \times T_{\text{ext}} + OFFSET
LÃ³gica general del algoritmo de control:
El algoritmo de control consta de varios pasos que se ejecutan de forma secuencial, siguiendo la lÃ³gica del control de temperatura. Los pasos incluirÃ¡n:

CÃ¡lculo del error: Determinamos la diferencia entre la temperatura objetivo 
ð‘‡
obj
T 
obj
â€‹
  y la temperatura interior actual 
ð‘‡
int
T 
int
â€‹
 .

Curva de calefacciÃ³n ajustada por el error: Usamos la temperatura exterior 
ð‘‡
ext
T 
ext
â€‹
  para determinar la temperatura de impulsiÃ³n en funciÃ³n de la curva de calefacciÃ³n.

Control PI (Proporcional-Integral): Aplicamos la ganancia 
ð¾
K sobre el error para ajustar la salida. El control proporcional se basarÃ¡ en el error, mientras que el control integral tiene en cuenta la acumulaciÃ³n de errores para ajustar a largo plazo.

Zona Muerta: Si el error estÃ¡ dentro de un rango de tolerancia (zona muerta), no realizamos ninguna acciÃ³n.

SaturaciÃ³n: Aplicamos los lÃ­mites superior e inferior a la temperatura de impulsiÃ³n resultante, para que no sobrepase los valores mÃ¡ximos y mÃ­nimos establecidos.

FÃ³rmulas y Algoritmo Detallado:
1. CÃ¡lculo del error:
El error se calcula como la diferencia entre la consigna y la temperatura interior:

error
=
ð‘‡
obj
âˆ’
ð‘‡
int
error=T 
obj
â€‹
 âˆ’T 
int
â€‹
 
2. Curva de calefacciÃ³n:
La temperatura de impulsiÃ³n inicial se calcula usando la curva de calefacciÃ³n basada en la temperatura exterior:

\text{flow_temp\_curva} = \text{GAIN} \times T_{\text{ext}} + \text{OFFSET}
3. Ajuste con el control PI:
El control proporcional ajusta la temperatura de impulsiÃ³n en funciÃ³n del error. La salida proporcional se calcula como:

\text{flow_temp\_corr} = \text{flow_temp\_curva} + K \times \text{error}
ð¾
K es la ganancia del lazo, que ajusta la influencia del error en el control.

4. AplicaciÃ³n de la Zona Muerta:
La zona muerta se implementa como un rango de valores del error en el que no se realiza correcciÃ³n. Si el error estÃ¡ dentro de un rango predefinido, el sistema no ajustarÃ¡ la temperatura de impulsiÃ³n.

Definimos el rango de la zona muerta 
error_min
error_min y 
error_max
error_max. Si el error estÃ¡ dentro de este rango, se mantiene la temperatura de impulsiÃ³n sin cambios.

\text{Si } \text{error\_min} \leq \text{error} \leq \text{error\_max}, \quad \text{no se ajusta flow_temp}
5. SaturaciÃ³n de la temperatura de impulsiÃ³n:
Se limitan los valores de la temperatura de impulsiÃ³n \text{flow_temp\_corr} a los valores mÃ¡ximos y mÃ­nimos permitidos. Estos valores dependen de los lÃ­mites de temperatura de tu sistema.

Definimos 
ð‘‡
min
T 
min
â€‹
  y 
ð‘‡
max
T 
max
â€‹
  como los lÃ­mites mÃ­nimo y mÃ¡ximo de la temperatura de impulsiÃ³n:

\text{flow_temp\_limited} = \min \left( \max \left( \text{flow_temp\_corr}, T_{\text{min}} \right), T_{\text{max}} \right)
Este paso asegura que la temperatura de impulsiÃ³n no sea demasiado baja ni demasiado alta, incluso si el control PI ha generado un valor fuera de esos rangos.

Algoritmo Completo en PseudocÃ³digo:
text
Copy
Edit
// Paso 1: CÃ¡lculo del error
error = T_obj - T_int

// Paso 2: Curva de calefacciÃ³n
flow_temp_curva = GAIN * T_ext + OFFSET

// Paso 3: Control PI (Proporcional)
flow_temp_corr = flow_temp_curva + K * error

// Paso 4: AplicaciÃ³n de la Zona Muerta
if (error >= error_min and error <= error_max) {
    flow_temp_corr = flow_temp_curva // No se realiza ajuste si estÃ¡ dentro de la zona muerta
}

// Paso 5: SaturaciÃ³n de la temperatura de impulsiÃ³n
flow_temp_limited = min(max(flow_temp_corr, T_min), T_max)

// Paso 6: Salida (flow_temp) es la temperatura de impulsiÃ³n ajustada
flow_temp = flow_temp_limited
ExplicaciÃ³n del PseudocÃ³digo:
CÃ¡lculo del error: Se calcula la diferencia entre la consigna 
ð‘‡
obj
T 
obj
â€‹
  y la temperatura interior 
ð‘‡
int
T 
int
â€‹
 .

Curva de calefacciÃ³n: Se calcula la temperatura de impulsiÃ³n inicial segÃºn la temperatura exterior 
ð‘‡
ext
T 
ext
â€‹
  y la pendiente 
GAIN
GAIN, junto con el desplazamiento 
OFFSET
OFFSET.

Control PI: Se ajusta la temperatura de impulsiÃ³n con la ganancia 
ð¾
K, que depende del error. El factor 
ð¾
K puede ajustarse para hacer el sistema mÃ¡s o menos sensible a los errores.

Zona muerta: Si el error estÃ¡ dentro de un rango especÃ­fico (zona muerta), no se hace correcciÃ³n.

SaturaciÃ³n: Se asegura que la temperatura de impulsiÃ³n no supere los lÃ­mites mÃ¡ximos ni mÃ­nimos establecidos.

Resultado final: El valor ajustado de la temperatura de impulsiÃ³n se usa como la salida del sistema para controlar la caldera, bomba de calor u otro generador de calor.

ParÃ¡metros adicionales que podrÃ­an ser Ãºtiles:
T_min y T_max: Definidos como los valores mÃ¡ximos y mÃ­nimos permitidos para la temperatura de impulsiÃ³n.

error_min y error_max: Definen la zona muerta, que podrÃ­a ser un pequeÃ±o rango alrededor del error cero donde no se realiza ningÃºn ajuste.

Este algoritmo te permitirÃ¡ controlar de manera eficiente la temperatura interior, optimizando el sistema de calefacciÃ³n (y refrigeraciÃ³n) segÃºn las condiciones exteriores y la consigna deseada.
